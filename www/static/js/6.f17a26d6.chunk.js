(this.webpackJsonphashstack=this.webpackJsonphashstack||[]).push([[6],{890:function(e,t,n){"use strict";n.r(t);var c=n(15),a=n(21),s=n(1),r=n.n(s),o=n(2),i=n.n(o),l=n(12),j=n(131),b=n(181),d=n(16),u=n(22),O=n(29),h=(n(295),n(3));O.a.configure({autoClose:4e3});var m=function(e){var t=Object(o.useState)(),n=Object(a.a)(t,2),s=n[0],i=n[1],m=Object(o.useState)(null),x=Object(a.a)(m,2),p=x[0],v=x[1],f=Object(o.useState)(!1),N=Object(a.a)(f,2),g=N[0],w=N[1],C=Object(o.useState)(!1),k=Object(a.a)(C,2),B=k[0],I=k[1],y=Object(o.useState)(0),S=Object(a.a)(y,2),T=S[0],M=S[1],D=Object(o.useState)(0),A=Object(a.a)(D,2),L=A[0],R=A[1],P=Object(o.useContext)(j.a),E=P.chainId,U=P.account,q=Object(o.useContext)(b.a).web3Wrapper,H=Object(o.useState)(null),_=Object(a.a)(H,2),G=_[0],J=_[1],z=Object(o.useState)(0),F=Object(a.a)(z,2),W=(F[0],F[1],function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(t.target.value),e.next=3,null===q||void 0===q?void 0:q.getMockBep20Instance().balanceOf(d.i[t.target.value],U);case 3:n=e.sent,J(Object(u.a)(Number(n)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var Y=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!g),document.body.classList.add("no_padding"),e.next=4,null===q||void 0===q?void 0:q.getMockBep20Instance().balanceOf(d.i[p],U);case 4:t=e.sent,J(Object(u.a)(Number(t)));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var t=Object(c.a)(r.a.mark((function t(){var n,c,a,o,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,I(!0),n=s,c=p,t.next=6,null===q||void 0===q?void 0:q.getMockBep20Instance().approve(d.i[c],L,d.j[E].DecimalsMap[c]);case 6:return a=t.sent,t.next=9,a.wait();case 9:return console.log("Approve Transaction sent: ",a),t.next=12,null===q||void 0===q?void 0:q.getLoanInstance().loanRequest(d.i[e.assetID],d.c[n],T,d.j[E].DecimalsMap[e.assetID],d.i[c],L,d.j[E].DecimalsMap[c]);case 12:return o=t.sent,t.next=15,o.wait();case 15:i=t.sent,Q(i.events,T),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(0),I(!1),O.a.error("".concat(Object(u.b)(t.t0)),{position:O.a.POSITION.BOTTOM_RIGHT,closeOnClick:!0});case 23:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(){return t.apply(this,arguments)}}(),Q=function(e,t){var n;e.forEach((function(e){"NewLoan"==e.event&&(e.event,n=e.args.loanAmount.toBigInt())}));var c=Object(u.a)(n,8);I(!1),O.a.success("Requested amount: ".concat("NaN"===c?t:c),{position:O.a.POSITION.BOTTOM_RIGHT,closeOnClick:!0})};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm w-xs",onClick:function(){Y()},children:"Borrow"}),Object(h.jsx)(l.n,{isOpen:g,toggle:function(){Y()},centered:!0,children:Object(h.jsx)("div",{className:"modal-body",children:U?Object(h.jsxs)(l.h,{children:[Object(h.jsx)("div",{className:"row mb-4",children:Object(h.jsx)("h6",{children:e.title})}),Object(h.jsx)("div",{className:"row mb-4",children:Object(h.jsx)(l.f,{sm:12,children:Object(h.jsx)(l.k,{type:"text",className:"form-control",id:"horizontal-password-Input",placeholder:"Minimum amount = ".concat(d.h[e.assetID]),onChange:function(e){M(Number(e.target.value))}})})}),Object(h.jsx)("div",{className:"row mb-4",children:Object(h.jsx)(l.f,{sm:12,children:Object(h.jsxs)("select",{className:"form-select",placeholder:"Commitment",onChange:function(e){i(e.target.value)},children:[Object(h.jsx)("option",{hidden:!0,children:"Commitment"}),Object(h.jsx)("option",{value:"NONE",children:"None"}),Object(h.jsx)("option",{value:"ONEMONTH",children:"One Month"})]})})}),Object(h.jsxs)("div",{className:"row mb-4",children:[Object(h.jsx)(l.f,{sm:8,children:Object(h.jsx)("h6",{children:"Collateral"})}),Object(h.jsx)(l.f,{sm:4,children:p&&Object(h.jsxs)("div",{align:"right",children:[" Balance : ","NaN"!==G?G:" Loading"]})})]}),Object(h.jsx)("div",{className:"row mb-4",children:Object(h.jsx)(l.f,{sm:12,children:Object(h.jsxs)("select",{className:"form-select",onChange:W,children:[Object(h.jsx)("option",{hidden:!0,children:"Collateral market"}),Object(h.jsx)("option",{value:"USDT",children:"USDT"}),Object(h.jsx)("option",{value:"USDC",children:"USDC"}),Object(h.jsx)("option",{value:"BTC",children:"BTC"}),Object(h.jsx)("option",{value:"BNB",children:"BNB"})]})})}),Object(h.jsx)("div",{className:"row mb-4",children:Object(h.jsx)(l.f,{sm:12,children:Object(h.jsxs)(l.l,{children:[Object(h.jsx)(l.k,{type:"number",className:"form-control",id:"amount",placeholder:"Amount",onChange:function(e){R(Number(e.target.value))},value:0!==L?L:"Amount"}),p&&Object(h.jsx)(l.a,{outline:!0,type:"button",className:"btn btn-md w-xs",onClick:function(){G&&R(G)},disabled:!G,style:{background:"#2e3444",border:"#2e3444"},children:Object(h.jsx)("span",{style:{borderBottom:"2px dotted #fff"},children:"Max"})})]})})}),Object(h.jsxs)("div",{className:"row mb-4",children:[Object(h.jsx)(l.f,{sm:6,children:Object(h.jsxs)("p",{children:["Borrow APR ",Object(h.jsx)("strong",{children:d.a[s||"NONE"]||"15%"})]})}),Object(h.jsx)(l.f,{sm:6,children:Object(h.jsxs)("p",{style:{float:"right"},children:["Collateral APY ",Object(h.jsx)("strong",{children:"0%"})]})})]}),Object(h.jsx)("div",{className:"d-grid gap-2",children:Object(h.jsx)(l.a,{color:"primary",className:"w-md",disabled:void 0===s||B,onClick:K,children:B?Object(h.jsx)(l.s,{children:"Loading..."}):"Request Loan"})})]}):Object(h.jsx)("h2",{children:"Please connect your wallet"})})})]})};t.default=m=i.a.memo(m)}}]);
//# sourceMappingURL=6.f17a26d6.chunk.js.map